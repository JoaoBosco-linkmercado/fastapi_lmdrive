<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/hover-min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}" ></script>
    <!-- <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}" ></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
-->
    {{ fontawesome_html() }}

    <title>Link Drive</title>
</head>

<body>
  <header class="bg-primary text-white text-center py-3">
    <div class="d-flex justify-content-between align-items-center">
      <h1 class="text-center flex-grow-1">{{header}}</h1>
      <a type="sumbit" class="btn btn-secondary" href="/logout/"><i class="fa fa-close"></i></a>
    </div>
  </header>

{% block content %} 
{% endblock %}

<!-- <script src="{{ url_for('static', filename='script/jquery-3.2.1.slim.min.js') }}" ></script> -->
<!-- <script src="{{ url_for('static', filename='js/popper.min.js') }}" ></script> -->

<!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script> -->
<!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> -->
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>


<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

<!-- <script src="{{ url_for('static', filename='js/jquery.min.js') }}" ></script> 
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> 


<script src="{{ url_for('static', filename='js/popper.min.js') }}" ></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
 --> 

<script>
  $("#show-form-adddir").click(function(){
    document.getElementById('show-form-adddir').style.display="none";
    document.getElementById('form-adddir').style.display="flex";
  });

  $("#show-form-upload").click(function(){
    document.getElementById('show-form-upload').style.display="none";
    document.getElementById('form-upload').style.display="flex";
  });

</script>


<script>
$('.sort_order').click(function () {
        const Http = new XMLHttpRequest();
        const url='/changeSort?col=' + this.getAttribute("name");
        Http.open("GET", url, false);
        Http.send();
        window.location.reload();
});
</script>

<script>
var confirmationModal = document.getElementById('confirmationModal');
confirmationModal.addEventListener('show.bs.modal', function (event) {
  // Button that triggered the modal
  var button = event.relatedTarget;
  // Extract info from data-bs-* attributes
  var pergunta = button.getAttribute('data-bs-pergunta');
  var modalBody = confirmationModal.querySelector('.modal-body');
  modalBody.textContent = pergunta;
  var Okhref = button.getAttribute('data-bs-href');
  var modalSim = document.getElementById('modalSimBtn');
  modalSim.setAttribute("href", Okhref);
})
</script>

<script>
    var newNameModal = document.getElementById('newNameModal');
    newNameModal.addEventListener('show.bs.modal', function (event) {
      var button = event.relatedTarget;
      //var Okhref = button.getAttribute('data-bs-href');
      var modalTrocaBtn = document.getElementById('modalTrocaBtn');
      modalTrocaBtn.setAttribute("data-bs-href", button.getAttribute('data-bs-href'));;
    });
</script>

<script>
      function trocanome(event) {
        event.preventDefault(); // Prevent the default anchor click behavior
        //var modalTrocaBtn = document.getElementById('modalTrocaBtn');
        var href = document.getElementById('modalTrocaBtn').getAttribute("data-bs-href");
        var novonome = document.getElementById('modalInputField').value;
        const Http = new XMLHttpRequest();
        //const url= href + novonome;
        Http.open("GET", href + novonome, false);
        Http.onload = function() {
            if (Http.status >= 200 && Http.status < 300) {
                if (Http.responseText == "NOK") {alert("Nome não foi trocado !")};
                console.log('Response:', Http.responseText);
            } else {
                // Handle error
                console.error('Error:', Http.statusText);
            }
        };
        // Handle network errors
        Http.onerror = function() {
            console.error('Request failed');
        };
        Http.send();
        window.location.reload();
    };
  </script>
  

<script>
  function allowDrop(ev) {
    ev.preventDefault();
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.getAttribute("obj"));
  }

  function drop(ev) {
      ev.preventDefault();
      var data = ev.dataTransfer.getData("text");
      console.log('data:', data);
      var dest = ev.target.getAttribute("obj")
      console.log('dest:', dest);
      const Http = new XMLHttpRequest();
      const url='/move?from=' + data + '&to=' + dest;
      Http.open("GET", url, false);
      Http.onload = function() {
          if (Http.status >= 200 && Http.status < 300) {
              console.log('Response:', Http.responseText);
              if (Http.responseText == "" || Http.responseText == "OK") {
                window.location.reload();
              }
              else if(Http.responseText == "NOK") {
                alert("Movimentação falhou !");
              }
              else {
                window.location.href = Http.responseText;
              }
          } else {
              // Handle error
              console.error('Error:', Http.statusText);
              //window.location.reload();
          }
      };
        // Handle network errors
      Http.onerror = function() {
          console.error('Request failed');
      };
      Http.send();
  }
</script>

</body>

</html>